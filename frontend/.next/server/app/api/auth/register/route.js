"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},5315:e=>{e.exports=require("path")},5026:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>j,staticGenerationAsyncStorage:()=>x});var r={};t.r(r),t.d(r,{POST:()=>m});var a=t(7916),o=t(9930),i=t(2169),n=t(4389);let u=require("fs");var p=t(5315),c=t.n(p),d=t(4770),l=t.n(d);async function m(e){let{email:s,password:t}=await e.json();if(!s||!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(s))return n.NextResponse.json({success:!1,message:"E-mail inv\xe1lido."},{status:400});if(!t||t.length<6)return n.NextResponse.json({success:!1,message:"A senha deve ter pelo menos 6 caracteres."},{status:400});let r=c().join(process.cwd(),"app/api/auth/users.json"),a=[];try{let e=await u.promises.readFile(r,"utf-8");a=JSON.parse(e)}catch(e){if(e&&"ENOENT"!==e.code)return n.NextResponse.json({success:!1,message:"Erro interno ao acessar usu\xe1rios",details:String(e)},{status:500});a=[]}if(a.some(e=>e.email===s))return n.NextResponse.json({success:!1,message:"Usu\xe1rio j\xe1 cadastrado."},{status:409});let o={id:l().randomUUID(),email:s,password:t,createdAt:new Date().toISOString()};a.push(o);try{await u.promises.writeFile(r,JSON.stringify(a,null,2))}catch(e){return n.NextResponse.json({success:!1,message:"Erro ao salvar usu\xe1rio",details:String(e)},{status:500})}let i=l().randomBytes(16).toString("hex");return n.NextResponse.json({success:!0,message:"Usu\xe1rio registrado com sucesso!",user:{id:o.id,email:o.email},token:i})}let g=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/home/jistriane/Documentos/StreamPay AI/StreamPay-AI/frontend/app/api/auth/register/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:x,serverHooks:j}=g,f="/api/auth/register/route";function v(){return(0,i.patchFetch)({serverHooks:j,staticGenerationAsyncStorage:x})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[148,136],()=>t(5026));module.exports=r})();