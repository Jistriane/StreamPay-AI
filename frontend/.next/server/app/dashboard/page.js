(()=>{var e={};e.id=702,e.ids=[702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6005:e=>{"use strict";e.exports=require("node:crypto")},1168:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o}),a(2489),a(4809),a(2593);var t=a(3826),r=a(9930),n=a(2049),l=a.n(n),i=a(8405),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(s,d);let o=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,2489)),"/home/jistriane/Documentos/StreamPay AI/StreamPay-AI/frontend/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,4809)),"/home/jistriane/Documentos/StreamPay AI/StreamPay-AI/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,2593,23)),"next/dist/client/components/not-found-error"]}],c=["/home/jistriane/Documentos/StreamPay AI/StreamPay-AI/frontend/app/dashboard/page.tsx"],x="/dashboard/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5581:(e,s,a)=>{Promise.resolve().then(a.bind(a,5022))},5022:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>x});var t=a(1694),r=a(1324),n=a(4666),l=a(752),i=a(8570),d=a(2166);function o({isOpen:e,onClose:s,onStreamCreated:a}){let[r,o]=(0,t.useState)({recipient:"",token:"USDC",deposit:"",rate_per_second:""}),[c,x]=(0,t.useState)(!1),[m,p]=(0,t.useState)(null),[h,u]=(0,t.useState)(!1),j=e=>{let{name:s,value:a}=e.target;o(e=>({...e,[s]:a})),p(null)},b=()=>r.recipient.trim()?/^0x[a-fA-F0-9]{40}$/.test(r.recipient)?!r.deposit||0>=parseFloat(r.deposit)?(p("Valor de dep\xf3sito deve ser maior que zero"),!1):!(!r.rate_per_second||0>=parseFloat(r.rate_per_second))||(p("Taxa por segundo deve ser maior que zero"),!1):(p("Endere\xe7o Ethereum inv\xe1lido (deve come\xe7ar com 0x)"),!1):(p("Endere\xe7o do destinat\xe1rio \xe9 obrigat\xf3rio"),!1),g=async e=>{if(e.preventDefault(),b()){x(!0),p(null),u(!1);try{let e=await (0,i.ri)(`${process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001"}/api/streams`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipient:r.recipient,token:r.token,deposit:r.deposit,rate_per_second:r.rate_per_second})});if(!e.ok){let s=await e.json();throw Error(s.message||"Erro ao criar stream")}u(!0),o({recipient:"",token:"USDC",deposit:"",rate_per_second:""}),setTimeout(()=>{a?.(),s()},2e3)}catch(e){p(e instanceof Error?e.message:"Erro desconhecido")}finally{x(!1)}}};return e?d.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,d.jsxs)(n.Z,{variant:"glass",padding:"lg",className:"max-w-md w-full",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold",children:"Criar Novo Stream"}),d.jsx("button",{onClick:s,className:"text-secondary hover:text-white text-2xl",disabled:c,children:"✕"})]}),h?(0,d.jsxs)("div",{className:"text-center py-8",children:[d.jsx("p",{className:"text-4xl mb-4",children:"✅"}),d.jsx("p",{className:"text-green-400 font-bold mb-2",children:"Stream criado com sucesso!"}),d.jsx("p",{className:"text-secondary text-sm",children:"Redirecionando..."})]}):(0,d.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[m&&d.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded p-3",children:(0,d.jsxs)("p",{className:"text-red-400 text-sm",children:["❌ ",m]})}),(0,d.jsxs)("div",{children:[d.jsx("label",{className:"block text-sm text-secondary mb-2",children:"Endere\xe7o do Destinat\xe1rio"}),d.jsx("input",{type:"text",name:"recipient",value:r.recipient,onChange:j,placeholder:"0x...",className:"w-full bg-slate-800/50 border border-slate-700 rounded px-4 py-2 text-white placeholder-secondary focus:outline-none focus:border-cyan-400 font-mono text-sm",disabled:c}),d.jsx("p",{className:"text-xs text-secondary mt-1",children:"Endere\xe7o Ethereum de 42 caracteres"})]}),(0,d.jsxs)("div",{children:[d.jsx("label",{className:"block text-sm text-secondary mb-2",children:"Token"}),(0,d.jsxs)("select",{name:"token",value:r.token,onChange:j,className:"w-full bg-slate-800/50 border border-slate-700 rounded px-4 py-2 text-white focus:outline-none focus:border-cyan-400",disabled:c,children:[d.jsx("option",{value:"USDC",children:"USDC"}),d.jsx("option",{value:"USDT",children:"USDT"}),d.jsx("option",{value:"ETH",children:"ETH"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm text-secondary mb-2",children:["Valor de Dep\xf3sito (",r.token,")"]}),d.jsx("input",{type:"number",name:"deposit",value:r.deposit,onChange:j,placeholder:"100.00",step:"0.01",className:"w-full bg-slate-800/50 border border-slate-700 rounded px-4 py-2 text-white placeholder-secondary focus:outline-none focus:border-cyan-400",disabled:c})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm text-secondary mb-2",children:["Taxa por Segundo (",r.token,")"]}),d.jsx("input",{type:"number",name:"rate_per_second",value:r.rate_per_second,onChange:j,placeholder:"0.01",step:"0.0001",className:"w-full bg-slate-800/50 border border-slate-700 rounded px-4 py-2 text-white placeholder-secondary focus:outline-none focus:border-cyan-400",disabled:c}),r.rate_per_second&&(0,d.jsxs)("div",{className:"mt-2 p-3 bg-slate-800/50 rounded text-sm",children:[d.jsx("p",{className:"text-secondary mb-1",children:"Estimativa mensal:"}),(0,d.jsxs)("p",{className:"text-cyan-400 font-bold",children:[(2592e3*(parseFloat(r.rate_per_second)||0)).toFixed(2)," ",r.token]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-4",children:[d.jsx(l.Z,{variant:"ghost",onClick:s,disabled:c,fullWidth:!0,children:"Cancelar"}),d.jsx(l.Z,{variant:"neon",type:"submit",disabled:c,fullWidth:!0,children:c?"⏳ Criando...":"✓ Criar"})]})]})]})}):null}var c=a(6532);function x(){let e=(0,r.useRouter)(),{isAuthenticated:s,loading:a,user:x,address:m,logout:p}=(0,c.a)(),[h,u]=(0,t.useState)([]),[j,b]=(0,t.useState)(!1),[g,N]=(0,t.useState)(null),[v,f]=(0,t.useState)(!1),y=async()=>{b(!0),N(null);try{let e=await (0,i.ri)(`${process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001"}/api/streams`);if(!e.ok)throw Error("Falha ao buscar streams");let s=await e.json();u(s.data||[])}catch(e){console.error("Erro ao buscar streams:",e),N(e instanceof Error?e.message:"Erro desconhecido"),u([])}finally{b(!1)}};if(a)return d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx(n.Z,{variant:"glass",padding:"lg",children:d.jsx("p",{className:"text-center",children:"Carregando..."})})});if(!s)return null;let S=h.filter(e=>"active"===e.status||"pending"===e.status),_=h.filter(e=>"completed"===e.status||"cancelled"===e.status),k=S.reduce((e,s)=>{let a=parseFloat(s.deposit||"0");return e+(isNaN(a)?0:a)},0);return(0,d.jsxs)("div",{className:"min-h-screen py-8",children:[(0,d.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,d.jsxs)("div",{children:[d.jsx("h1",{className:"text-4xl font-bold text-gradient mb-2",children:"Dashboard"}),d.jsx("p",{className:"text-secondary",children:"Bem-vindo ao StreamPay AI"})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[d.jsx(l.Z,{onClick:()=>f(!0),variant:"neon",children:"✨ Criar Stream"}),d.jsx(l.Z,{onClick:p,variant:"ghost",children:"Desconectar"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,d.jsxs)(n.Z,{variant:"glass",padding:"lg",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Informa\xe7\xf5es da Conta"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{children:[d.jsx("p",{className:"text-sm text-secondary",children:"Carteira:"}),d.jsx("p",{className:"font-mono text-lg",children:m?`${m.slice(0,6)}...${m.slice(-4)}`:"N\xe3o conectada"})]}),(0,d.jsxs)("div",{children:[d.jsx("p",{className:"text-sm text-secondary",children:"Email:"}),d.jsx("p",{className:"font-mono text-sm",children:x?.email||"Carregando..."})]}),(0,d.jsxs)("div",{children:[d.jsx("p",{className:"text-sm text-secondary",children:"Fun\xe7\xe3o:"}),d.jsx("p",{className:"capitalize",children:x?.role||"Carregando..."})]})]})]}),(0,d.jsxs)(n.Z,{variant:"glass",padding:"lg",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Estat\xedsticas"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{children:[d.jsx("p",{className:"text-sm text-secondary",children:"Streams Ativas:"}),d.jsx("p",{className:"text-2xl font-bold text-gradient",children:S.length})]}),(0,d.jsxs)("div",{children:[d.jsx("p",{className:"text-sm text-secondary",children:"Total Depositado:"}),(0,d.jsxs)("p",{className:"text-2xl font-bold",children:["$",k.toFixed(2)]})]}),(0,d.jsxs)("div",{children:[d.jsx("p",{className:"text-sm text-secondary",children:"Status:"}),d.jsx("p",{className:"text-green-500",children:"✅ Ativa"})]})]})]})]}),(0,d.jsxs)(n.Z,{variant:"glass",padding:"lg",className:"mb-8",children:[(0,d.jsxs)("h2",{className:"text-2xl font-bold mb-6",children:["Streams Ativos (",S.length,")"]}),j?d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{className:"text-secondary",children:"Carregando streams..."})}):g?(0,d.jsxs)("div",{className:"bg-red-500/10 border border-red-500 rounded p-4 mb-4",children:[(0,d.jsxs)("p",{className:"text-red-400",children:["⚠️ Erro: ",g]}),d.jsx(l.Z,{onClick:y,variant:"ghost",className:"mt-2",children:"Tentar Novamente"})]}):0===S.length?(0,d.jsxs)("div",{className:"text-center py-12",children:[d.jsx("p",{className:"text-secondary mb-4",children:"Nenhum stream ativo no momento"}),d.jsx(l.Z,{variant:"neon",onClick:()=>e.push("/streams"),children:"Criar Stream"})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(e=>(0,d.jsxs)("div",{className:"bg-gradient-to-br from-slate-800/50 to-blue-900/50 rounded-lg p-4 border border-cyan-500/30",children:[(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsxs)("p",{className:"text-xs text-cyan-400 uppercase tracking-wider",children:["Stream ",e.id]}),(0,d.jsxs)("p",{className:"text-sm text-secondary mt-1",children:["Para: ",`${String(e.recipient).slice(0,6)}...${String(e.recipient).slice(-4)}`]})]}),(0,d.jsxs)("div",{className:"space-y-2 text-sm mb-4",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-secondary",children:"Token:"}),d.jsx("span",{className:"font-semibold",children:e.token})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-secondary",children:"Depositado:"}),d.jsx("span",{className:"font-semibold",children:e.deposit})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-secondary",children:"Taxa/s:"}),d.jsx("span",{className:"font-semibold text-cyan-400",children:e.rate_per_second})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-secondary",children:"Status:"}),d.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-500/20 text-green-400",children:e.status})]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[d.jsx(l.Z,{variant:"neon",className:"flex-1",children:"Reivindicar"}),d.jsx(l.Z,{variant:"neon",className:"flex-1",children:"Detalhes"})]})]},e.id))})]}),_.length>0&&(0,d.jsxs)(n.Z,{variant:"glass",padding:"lg",className:"mb-8",children:[(0,d.jsxs)("h2",{className:"text-2xl font-bold mb-6",children:["Hist\xf3rico (",_.length,")"]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(e=>(0,d.jsxs)("div",{className:"bg-slate-800/30 rounded-lg p-4 border border-slate-700",children:[(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsxs)("p",{className:"text-xs text-slate-400 uppercase tracking-wider",children:["Stream ",e.id]}),(0,d.jsxs)("p",{className:"text-sm text-secondary mt-1",children:["Para: ",`${String(e.recipient).slice(0,6)}...${String(e.recipient).slice(-4)}`]})]}),(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-secondary",children:"Token:"}),d.jsx("span",{className:"font-semibold",children:e.token})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-secondary",children:"Total:"}),d.jsx("span",{className:"font-semibold",children:e.deposit})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-secondary",children:"Status:"}),d.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-slate-700 text-slate-300",children:e.status})]})]})]},e.id))})]}),(0,d.jsxs)(n.Z,{variant:"glass",padding:"lg",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:"A\xe7\xf5es Dispon\xedveis"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsx(l.Z,{variant:"neon",fullWidth:!0,onClick:()=>e.push("/streams"),children:"Criar Stream"}),d.jsx(l.Z,{variant:"neon",fullWidth:!0,onClick:y,children:"Atualizar"}),d.jsx(l.Z,{variant:"neon",fullWidth:!0,onClick:()=>e.push("/historico"),children:"Hist\xf3rico Completo"})]})]})]}),d.jsx(o,{isOpen:v,onClose:()=>f(!1),onStreamCreated:y})]})}},6532:(e,s,a)=>{"use strict";a.d(s,{a:()=>r});var t=a(1694);function r(){let[e,s]=(0,t.useState)(null),[a,r]=(0,t.useState)(null),[n,l]=(0,t.useState)(null),[i,d]=(0,t.useState)(!0),o=async()=>{let e=localStorage.getItem("authToken");if(!e){d(!1);return}try{let s=await fetch("http://localhost:3001/api/auth/me",{headers:{Authorization:`Bearer ${e}`}});if(s.ok){let e=await s.json();l(e)}else c()}catch(e){console.error("Erro ao carregar dados do usu\xe1rio:",e)}finally{d(!1)}},c=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userAddress"),s(null),r(null),l(null)};return{token:e,address:a,user:n,isAuthenticated:!!e,loading:i,logout:c,refreshUser:o}}},2489:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(7866).createProxy)(String.raw`/home/jistriane/Documentos/StreamPay AI/StreamPay-AI/frontend/app/dashboard/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[148,942,569],()=>a(1168));module.exports=t})();