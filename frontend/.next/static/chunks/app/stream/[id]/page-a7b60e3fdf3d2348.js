(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[503],{4606:function(e,t,s){Promise.resolve().then(s.bind(s,3488))},1525:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}}),s(2265);var a=s(7437);function n(e){let{children:t,variant:s="primary",size:n="md",fullWidth:r=!1,loading:o=!1,icon:c,className:i="",disabled:l,...d}=e;return(0,a.jsxs)("button",{className:"btn ".concat({primary:"btn-primary",secondary:"btn-secondary",danger:"btn-danger",ghost:"btn-ghost",neon:"btn-neon"}[s]," ").concat({sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[n]," ").concat(r?"btn-full":""," ").concat(o?"btn-loading":""," ").concat(i),disabled:l||o,...d,children:[o&&(0,a.jsx)("span",{className:"btn-spinner"}),c&&!o&&(0,a.jsx)("span",{className:"btn-icon",children:c}),(0,a.jsx)("span",{children:t})]})}},2711:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}}),s(2265);var a=s(7437);function n(e){let{children:t,className:s="",variant:n="default",hover:r=!1,padding:o="md"}=e;return(0,a.jsx)("div",{className:"card ".concat({default:"card-default",glass:"card-glass",gradient:"card-gradient",bordered:"card-bordered"}[n]," ").concat({sm:"p-4",md:"p-6",lg:"p-8"}[o]," ").concat(r?"card-hover":""," ").concat(s),children:t})}},5100:function(e,t,s){"use strict";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=localStorage.getItem("authToken"),a=localStorage.getItem("refreshToken"),n=new Headers({"Content-Type":"application/json",...t.headers});s&&n.set("Authorization","Bearer ".concat(s));let r=await fetch("http://localhost:3001/api".concat(e),{...t,headers:n});if(401===r.status){if(a)try{let s=await fetch("http://localhost:3001/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:a})});if(s.ok){let a=(await s.json()).token;a&&(localStorage.setItem("authToken",a),n.set("Authorization","Bearer ".concat(a)),r=await fetch("http://localhost:3001/api".concat(e),{...t,headers:n}))}}catch(e){}401===r.status&&(localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userAddress"),window.location.href="/login")}return r}s.d(t,{ri:function(){return a}})},3488:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(2265),n=s(2921),r=s(2711),o=s(1525),c=s(5100),i=s(7437),l=s(9151);function d(){let e=(0,n.useRouter)(),t=(0,n.useParams)(),s=null==t?void 0:t.id,[d,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(!0),[x,p]=(0,a.useState)(null),[f,g]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{s&&(async()=>{h(!0),p(null);try{let e=await (0,c.ri)("".concat(l.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001","/api/streams/").concat(s));if(!e.ok)throw Error("Stream n\xe3o encontrado");let t=await e.json();u(t.data)}catch(e){console.error("Erro ao buscar stream:",e),p(e instanceof Error?e.message:"Erro desconhecido")}finally{h(!1)}})()},[s]);let j=async()=>{if(d){g(!0),v(null);try{if(!(await (0,c.ri)("".concat(l.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001","/api/streams/").concat(s,"/claim"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).ok)throw Error("Erro ao reivindicar stream");v("✅ Stream reivindicado com sucesso!"),setTimeout(()=>window.location.reload(),1500)}catch(e){v("❌ Erro: ".concat(e instanceof Error?e.message:"Erro desconhecido"))}finally{g(!1)}}},y=async()=>{if(d){g(!0),v(null);try{if(!(await (0,c.ri)("".concat(l.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001","/api/streams/").concat(s,"/pause"),{method:"PATCH",headers:{"Content-Type":"application/json"}})).ok)throw Error("Erro ao pausar stream");v("⏸️ Stream pausado com sucesso!"),setTimeout(()=>window.location.reload(),1500)}catch(e){v("❌ Erro: ".concat(e instanceof Error?e.message:"Erro desconhecido"))}finally{g(!1)}}},N=async()=>{if(d&&confirm("Tem certeza que deseja cancelar este stream?")){g(!0),v(null);try{if(!(await (0,c.ri)("".concat(l.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001","/api/streams/").concat(s),{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw Error("Erro ao cancelar stream");v("\uD83D\uDDD1️ Stream cancelado com sucesso!"),setTimeout(()=>e.push("/dashboard"),1500)}catch(e){v("❌ Erro: ".concat(e instanceof Error?e.message:"Erro desconhecido"))}finally{g(!1)}}},T=(()=>{if(!d)return{perHour:0,perDay:0,perMonth:0};let e=3600*parseFloat(d.rate_per_second||"0"),t=24*e;return{perHour:e,perDay:t,perMonth:30*t}})(),w=(null==d?void 0:d.status)==="active"?"text-green-400":(null==d?void 0:d.status)==="paused"?"text-yellow-400":"text-red-400",E=(null==d?void 0:d.status)==="active"?"bg-green-500/20":(null==d?void 0:d.status)==="paused"?"bg-yellow-500/20":"bg-red-500/20";return m?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:(0,i.jsx)(r.Z,{variant:"glass",padding:"lg",children:(0,i.jsx)("p",{className:"text-center",children:"Carregando detalhes do stream..."})})}):x||!d?(0,i.jsx)("div",{className:"min-h-screen py-8 bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:(0,i.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,i.jsxs)(r.Z,{variant:"glass",padding:"lg",className:"text-center",children:[(0,i.jsxs)("p",{className:"text-red-400 mb-4",children:["❌ ",x||"Stream n\xe3o encontrado"]}),(0,i.jsx)(o.Z,{onClick:()=>e.push("/dashboard"),variant:"neon",children:"Voltar ao Dashboard"})]})})}):(0,i.jsx)("div",{className:"min-h-screen py-8 bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,i.jsxs)("div",{className:"mb-8 flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("h1",{className:"text-4xl font-bold text-gradient mb-2",children:["Stream #",d.id]}),(0,i.jsx)("p",{className:"text-secondary",children:"Detalhes completos da transa\xe7\xe3o"})]}),(0,i.jsx)(o.Z,{onClick:()=>e.push("/dashboard"),variant:"ghost",children:"← Voltar"})]}),(0,i.jsxs)(r.Z,{variant:"glass",padding:"lg",className:"mb-8",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-secondary mb-2",children:"Status"}),(0,i.jsx)("div",{className:"px-4 py-2 rounded-lg ".concat(E," inline-block"),children:(0,i.jsx)("p",{className:"font-bold ".concat(w," uppercase"),children:d.status})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-secondary mb-2",children:"Criado em"}),(0,i.jsx)("p",{className:"font-mono text-sm",children:new Date(d.created_at).toLocaleDateString("pt-BR")})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-secondary mb-2",children:"Token"}),(0,i.jsx)("p",{className:"text-xl font-bold text-cyan-400",children:d.token})]})]}),b&&(0,i.jsx)("div",{className:"mt-6 p-4 rounded-lg ".concat(b.includes("❌")?"bg-red-500/20 border border-red-500/50":"bg-green-500/20 border border-green-500/50"),children:(0,i.jsx)("p",{className:b.includes("❌")?"text-red-400":"text-green-400",children:b})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,i.jsxs)(r.Z,{variant:"glass",padding:"lg",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Endere\xe7os"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-cyan-400 uppercase tracking-wider mb-1",children:"De (Sender)"}),(0,i.jsx)("p",{className:"font-mono text-sm break-all",children:d.sender})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-cyan-400 uppercase tracking-wider mb-1",children:"Para (Recipient)"}),(0,i.jsx)("p",{className:"font-mono text-sm break-all",children:d.recipient})]})]})]}),(0,i.jsxs)(r.Z,{variant:"glass",padding:"lg",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Valores"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-secondary mb-1",children:"Depositado"}),(0,i.jsxs)("p",{className:"text-2xl font-bold text-cyan-400",children:[d.deposit," ",d.token]})]}),d.claimed_amount&&(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-secondary mb-1",children:"Reivindicado"}),(0,i.jsxs)("p",{className:"text-lg font-semibold text-green-400",children:[d.claimed_amount," ",d.token]})]})]})]})]}),(0,i.jsxs)(r.Z,{variant:"glass",padding:"lg",className:"mb-8",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Taxa de Fluxo"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{className:"bg-slate-800/50 rounded p-4",children:[(0,i.jsx)("p",{className:"text-xs text-secondary mb-2",children:"Por Segundo"}),(0,i.jsx)("p",{className:"text-lg font-bold text-cyan-400",children:d.rate_per_second})]}),(0,i.jsxs)("div",{className:"bg-slate-800/50 rounded p-4",children:[(0,i.jsx)("p",{className:"text-xs text-secondary mb-2",children:"Por Hora"}),(0,i.jsx)("p",{className:"text-lg font-bold text-cyan-400",children:T.perHour.toFixed(2)})]}),(0,i.jsxs)("div",{className:"bg-slate-800/50 rounded p-4",children:[(0,i.jsx)("p",{className:"text-xs text-secondary mb-2",children:"Por Dia"}),(0,i.jsx)("p",{className:"text-lg font-bold text-cyan-400",children:T.perDay.toFixed(2)})]}),(0,i.jsxs)("div",{className:"bg-slate-800/50 rounded p-4",children:[(0,i.jsx)("p",{className:"text-xs text-secondary mb-2",children:"Por M\xeas"}),(0,i.jsx)("p",{className:"text-lg font-bold text-cyan-400",children:T.perMonth.toFixed(2)})]})]})]}),d.remaining_balance&&(0,i.jsxs)(r.Z,{variant:"glass",padding:"lg",className:"mb-8",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Saldo Restante"}),(0,i.jsxs)("p",{className:"text-3xl font-bold text-green-400",children:[d.remaining_balance," ",d.token]})]}),(0,i.jsxs)(r.Z,{variant:"glass",padding:"lg",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"A\xe7\xf5es Dispon\xedveis"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["active"===d.status&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{variant:"neon",onClick:j,disabled:f,fullWidth:!0,children:f?"⏳ Processando...":"\uD83D\uDCB0 Reivindicar"}),(0,i.jsx)(o.Z,{variant:"neon",onClick:y,disabled:f,fullWidth:!0,children:f?"⏳ Processando...":"⏸️ Pausar"})]}),(0,i.jsx)(o.Z,{variant:"neon",onClick:N,disabled:f||"cancelled"===d.status,fullWidth:!0,className:"cancelled"===d.status?"opacity-50 cursor-not-allowed":"",children:f?"⏳ Processando...":"\uD83D\uDDD1️ Cancelar"})]})]})]})})}},2921:function(e,t,s){"use strict";var a=s(6168);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},9151:function(e,t,s){"use strict";var a,n;e.exports=(null==(a=s.g.process)?void 0:a.env)&&"object"==typeof(null==(n=s.g.process)?void 0:n.env)?s.g.process:s(7429)},7429:function(e){"use strict";!function(){var t={229:function(e){var t,s,a,n=e.exports={};function r(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{s="function"==typeof clearTimeout?clearTimeout:o}catch(e){s=o}}();var i=[],l=!1,d=-1;function u(){l&&a&&(l=!1,a.length?i=a.concat(i):d=-1,i.length&&m())}function m(){if(!l){var e=c(u);l=!0;for(var t=i.length;t;){for(a=i,i=[];++d<t;)a&&a[d].run();d=-1,t=i.length}a=null,l=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function x(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];i.push(new h(e,t)),1!==i.length||l||c(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=x,n.addListener=x,n.once=x,n.off=x,n.removeListener=x,n.removeAllListeners=x,n.emit=x,n.prependListener=x,n.prependOnceListener=x,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},s={};function a(e){var n=s[e];if(void 0!==n)return n.exports;var r=s[e]={exports:{}},o=!0;try{t[e](r,r.exports,a),o=!1}finally{o&&delete s[e]}return r.exports}a.ab="//";var n=a(229);e.exports=n}()}},function(e){e.O(0,[971,529,744],function(){return e(e.s=4606)}),_N_E=e.O()}]);