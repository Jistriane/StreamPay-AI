(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{8029:function(e,t,s){Promise.resolve().then(s.bind(s,9117))},1525:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}}),s(2265);var n=s(7437);function a(e){let{children:t,variant:s="primary",size:a="md",fullWidth:r=!1,loading:o=!1,icon:c,className:l="",disabled:i,...d}=e;return(0,n.jsxs)("button",{className:"btn ".concat({primary:"btn-primary",secondary:"btn-secondary",danger:"btn-danger",ghost:"btn-ghost",neon:"btn-neon"}[s]," ").concat({sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[a]," ").concat(r?"btn-full":""," ").concat(o?"btn-loading":""," ").concat(l),disabled:i||o,...d,children:[o&&(0,n.jsx)("span",{className:"btn-spinner"}),c&&!o&&(0,n.jsx)("span",{className:"btn-icon",children:c}),(0,n.jsx)("span",{children:t})]})}},2711:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}}),s(2265);var n=s(7437);function a(e){let{children:t,className:s="",variant:a="default",hover:r=!1,padding:o="md"}=e;return(0,n.jsx)("div",{className:"card ".concat({default:"card-default",glass:"card-glass",gradient:"card-gradient",bordered:"card-bordered"}[a]," ").concat({sm:"p-4",md:"p-6",lg:"p-8"}[o]," ").concat(r?"card-hover":""," ").concat(s),children:t})}},9117:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var n=s(2265),a=s(2921),r=s(2711),o=s(1525),c=s(5100),l=s(7437),i=s(9151);function d(){let e=(0,a.useRouter)(),[t,s]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0),[h,m]=(0,n.useState)(null),[x,p]=(0,n.useState)({status:"all",token:"all",dateFrom:"",dateTo:""});(0,n.useEffect)(()=>{f()},[]);let f=async()=>{u(!0),m(null);try{let e=await (0,c.ri)("".concat(i.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001","/api/streams"));if(!e.ok)throw Error("Erro ao buscar hist\xf3rico");let t=await e.json();s(t.data||[])}catch(e){console.error("Erro ao buscar streams:",e),m(e instanceof Error?e.message:"Erro desconhecido")}finally{u(!1)}},g=e=>{let{name:t,value:s}=e.target;p(e=>({...e,[t]:s}))},b=t.filter(e=>{if("all"!==x.status&&e.status!==x.status||"all"!==x.token&&e.token!==x.token)return!1;let t=new Date(e.created_at);if(x.dateFrom&&t<new Date(x.dateFrom))return!1;if(x.dateTo){let e=new Date(x.dateTo);if(e.setHours(23,59,59,999),t>e)return!1}return!0}),v=t.length,j=b.length,y=e=>{switch(e){case"active":case"pending":return"text-green-400";case"paused":return"text-yellow-400";case"completed":case"cancelled":return"text-red-400";default:return"text-secondary"}},N=e=>{switch(e){case"active":case"pending":return"bg-green-500/20";case"paused":return"bg-yellow-500/20";case"completed":case"cancelled":return"bg-red-500/20";default:return"bg-slate-800/50"}};return d?(0,l.jsx)("div",{className:"min-h-screen py-8 bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:(0,l.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,l.jsx)(r.Z,{variant:"glass",padding:"lg",className:"text-center",children:(0,l.jsx)("p",{children:"Carregando hist\xf3rico..."})})})}):(0,l.jsx)("div",{className:"min-h-screen py-8 bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,l.jsxs)("div",{className:"mb-8 flex justify-between items-start",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-gradient mb-2",children:"Hist\xf3rico"}),(0,l.jsx)("p",{className:"text-secondary",children:"Todos os seus streams e transa\xe7\xf5es"})]}),(0,l.jsx)(o.Z,{onClick:()=>e.push("/dashboard"),variant:"ghost",children:"← Voltar"})]}),(0,l.jsxs)(r.Z,{variant:"glass",padding:"lg",className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDD0D Filtros"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-secondary mb-2",children:"Status"}),(0,l.jsxs)("select",{name:"status",value:x.status,onChange:g,className:"w-full bg-slate-800/50 border border-slate-700 rounded px-4 py-2 text-white focus:outline-none focus:border-cyan-400",children:[(0,l.jsx)("option",{value:"all",children:"Todos"}),(0,l.jsx)("option",{value:"active",children:"Ativo"}),(0,l.jsx)("option",{value:"pending",children:"Pendente"}),(0,l.jsx)("option",{value:"paused",children:"Pausado"}),(0,l.jsx)("option",{value:"completed",children:"Conclu\xeddo"}),(0,l.jsx)("option",{value:"cancelled",children:"Cancelado"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-secondary mb-2",children:"Token"}),(0,l.jsxs)("select",{name:"token",value:x.token,onChange:g,className:"w-full bg-slate-800/50 border border-slate-700 rounded px-4 py-2 text-white focus:outline-none focus:border-cyan-400",children:[(0,l.jsx)("option",{value:"all",children:"Todos"}),(0,l.jsx)("option",{value:"USDC",children:"USDC"}),(0,l.jsx)("option",{value:"USDT",children:"USDT"}),(0,l.jsx)("option",{value:"ETH",children:"ETH"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-secondary mb-2",children:"De"}),(0,l.jsx)("input",{type:"date",name:"dateFrom",value:x.dateFrom,onChange:g,className:"w-full bg-slate-800/50 border border-slate-700 rounded px-4 py-2 text-white focus:outline-none focus:border-cyan-400"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-secondary mb-2",children:"At\xe9"}),(0,l.jsx)("input",{type:"date",name:"dateTo",value:x.dateTo,onChange:g,className:"w-full bg-slate-800/50 border border-slate-700 rounded px-4 py-2 text-white focus:outline-none focus:border-cyan-400"})]}),(0,l.jsx)("div",{className:"flex items-end",children:(0,l.jsx)(o.Z,{variant:"ghost",onClick:()=>p({status:"all",token:"all",dateFrom:"",dateTo:""}),fullWidth:!0,children:"Limpar Filtros"})})]}),(0,l.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-700",children:(0,l.jsxs)("p",{className:"text-secondary",children:["Mostrando ",(0,l.jsx)("span",{className:"text-cyan-400 font-bold",children:j})," de"," ",(0,l.jsx)("span",{className:"text-cyan-400 font-bold",children:v})," streams"]})})]}),h&&(0,l.jsx)(r.Z,{variant:"glass",padding:"lg",className:"mb-8 border-red-500/50",children:(0,l.jsxs)("p",{className:"text-red-400",children:["❌ ",h]})}),0===b.length?(0,l.jsxs)(r.Z,{variant:"glass",padding:"lg",className:"text-center",children:[(0,l.jsx)("p",{className:"text-secondary mb-4",children:"Nenhum stream encontrado com os filtros selecionados"}),(0,l.jsx)(o.Z,{variant:"neon",onClick:()=>p({status:"all",token:"all",dateFrom:"",dateTo:""}),children:"Limpar Filtros"})]}):(0,l.jsx)("div",{className:"grid grid-cols-1 gap-4",children:b.map(t=>(0,l.jsx)("div",{onClick:()=>e.push("/stream/".concat(t.id)),className:"cursor-pointer",children:(0,l.jsx)(r.Z,{variant:"glass",padding:"lg",className:"hover:border-cyan-400/50 transition",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-secondary mb-1",children:"ID"}),(0,l.jsxs)("p",{className:"font-bold",children:["#",t.id]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-secondary mb-1",children:"Status"}),(0,l.jsx)("div",{className:"px-3 py-1 rounded inline-block ".concat(N(t.status)),children:(0,l.jsx)("p",{className:"text-sm font-bold uppercase ".concat(y(t.status)),children:t.status})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-secondary mb-1",children:"Valor"}),(0,l.jsxs)("p",{className:"font-bold text-cyan-400",children:[t.deposit," ",t.token]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-secondary mb-1",children:"Taxa/seg"}),(0,l.jsx)("p",{className:"font-mono text-sm",children:t.rate_per_second})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-secondary mb-1",children:"Criado em"}),(0,l.jsx)("p",{className:"text-sm",children:new Date(t.created_at).toLocaleDateString("pt-BR")})]}),(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(o.Z,{variant:"neon",onClick:s=>{s.stopPropagation(),e.push("/stream/".concat(t.id))},children:"Ver Detalhes →"})})]})})},t.id))})]})})}},5100:function(e,t,s){"use strict";async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=localStorage.getItem("authToken"),n=localStorage.getItem("refreshToken"),a=new Headers({"Content-Type":"application/json",...t.headers});s&&a.set("Authorization","Bearer ".concat(s));let r=await fetch("http://localhost:3001/api".concat(e),{...t,headers:a});if(401===r.status){if(n)try{let s=await fetch("http://localhost:3001/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:n})});if(s.ok){let n=(await s.json()).token;n&&(localStorage.setItem("authToken",n),a.set("Authorization","Bearer ".concat(n)),r=await fetch("http://localhost:3001/api".concat(e),{...t,headers:a}))}}catch(e){}401===r.status&&(localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userAddress"),window.location.href="/login")}return r}s.d(t,{ri:function(){return n}})},2921:function(e,t,s){"use strict";var n=s(6168);s.o(n,"useParams")&&s.d(t,{useParams:function(){return n.useParams}}),s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}})},9151:function(e,t,s){"use strict";var n,a;e.exports=(null==(n=s.g.process)?void 0:n.env)&&"object"==typeof(null==(a=s.g.process)?void 0:a.env)?s.g.process:s(7429)},7429:function(e){"use strict";!function(){var t={229:function(e){var t,s,n,a=e.exports={};function r(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{s="function"==typeof clearTimeout?clearTimeout:o}catch(e){s=o}}();var l=[],i=!1,d=-1;function u(){i&&n&&(i=!1,n.length?l=n.concat(l):d=-1,l.length&&h())}function h(){if(!i){var e=c(u);i=!0;for(var t=l.length;t;){for(n=l,l=[];++d<t;)n&&n[d].run();d=-1,t=l.length}n=null,i=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function x(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];l.push(new m(e,t)),1!==l.length||i||c(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=x,a.addListener=x,a.once=x,a.off=x,a.removeListener=x,a.removeAllListeners=x,a.emit=x,a.prependListener=x,a.prependOnceListener=x,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},s={};function n(e){var a=s[e];if(void 0!==a)return a.exports;var r=s[e]={exports:{}},o=!0;try{t[e](r,r.exports,n),o=!1}finally{o&&delete s[e]}return r.exports}n.ab="//";var a=n(229);e.exports=a}()}},function(e){e.O(0,[971,529,744],function(){return e(e.s=8029)}),_N_E=e.O()}]);